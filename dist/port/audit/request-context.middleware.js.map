{"version":3,"sources":["../../../src/port/audit/request-context.middleware.ts"],"sourcesContent":["import { Injectable, NestMiddleware } from '@nestjs/common';\n\nimport { createNamespace } from 'cls-hooked';\nimport { NextFunction, Request, Response } from 'express';\n\nconst requestNamespace = createNamespace('request');\n\n@Injectable()\nexport class RequestContext implements NestMiddleware {\n  use(request: Request, response: Response, next: NextFunction) {\n    requestNamespace.run(() => {\n      requestNamespace.set('request', request);\n      next();\n    });\n  }\n\n  static getRequest() {\n    return requestNamespace.get('request');\n  }\n}\n"],"names":["RequestContext","requestNamespace","createNamespace","use","request","response","next","run","set","getRequest","get"],"mappings":";;;;+BAQaA;;;eAAAA;;;wBAR8B;2BAEX;;;;;;;AAGhC,MAAMC,mBAAmBC,IAAAA,0BAAe,EAAC;AAGlC,IAAA,AAAMF,iBAAN,MAAMA;IACXG,IAAIC,OAAgB,EAAEC,QAAkB,EAAEC,IAAkB,EAAE;QAC5DL,iBAAiBM,GAAG,CAAC;YACnBN,iBAAiBO,GAAG,CAAC,WAAWJ;YAChCE;QACF;IACF;IAEA,OAAOG,aAAa;QAClB,OAAOR,iBAAiBS,GAAG,CAAC;IAC9B;AACF"}